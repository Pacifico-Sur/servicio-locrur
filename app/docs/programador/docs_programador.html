<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
    <title></title>
</head>

<body>
    <div>
        <h1>Servicio de Información y Conocimiento de Localidades Rurales</h1>
        <main>
            <section id="#introduccion">
                <h2>
                    Documentación para el programdor
                </h2>

                <p>
                    El servicio de información y conocimiento de localidades rurales (SICLR) es una aplicación que está
                    hecha en <tt>PHP</tt>, que se usa para la vista y para el controlador. Existen también archivos
                    <tt>JavaScript</tt>, los cuales sirven para dar interactividad
                    a la aplicación a medida que el usuario está navegando dentro de ella. Finalmente, hay archivos
                    <tt>CSS</tt> que le dan el estilo a la aplicación.
                </p>
                <p>Enseguida se muestra la estructura de la aplicación y la descripción de cada uno de sus archivos y
                    componentes.</p>

                <ul id="myUL">
                    <li><span class="caret">ApiControl/</span>
                        <ul class="nested">
                            <li><b>ApiControl.php</b></li>
                            <li>ApiMain.php</li>
                            <li>ApiMapa.php</li>
                            <li><b>ApiSelect.php</b></li>
                            <li><b>ApiServicioMap.php</b></li>
                            <li>ApiSessionSecurity.php</li>
                            <li>index.php</li>
                            <li>Router.php</li>
                        </ul>
                    </li>
                    <li><span class="caret">assets/</span>
                        <ul class="nested">
                            <li>jquery-1.9.1.min.js</li>
                            <li>nicepage.css</li>
                            <li>nicepage.js</li>
                        </ul>
                    </li>
                    <li><span class="caret">Autoload/</span>
                        <ul class="nested">
                            <li>Autoload.php</li>
                        </ul>
                    </li>
                    <li><span class="caret">css-geo/</span>
                        <ul class="nested">
                            <li>font-awesome/</li>
                            <li>plugins/</li>
                        </ul>
                    </li>
                    <li><span class="caret">Database/</span>
                        <ul class="nested">
                            <li><b>Database.php</b></li>
                        </ul>
                    </li>
                    <li><span class="caret">docs/</span>
                        <ul class="nested">
                            <li><span class="caret">programador/</span>
                                <ul class="nested">
                                    <li>docs_programador.html</li>
                                </ul>
                            </li>
                            <li><span class="caret">usuario/</span>
                                <ul class="nested">
                                    <li>docs_usuario.html</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><span class="caret">footable/*</span>
                        <ul class="nested">
                            <li>Item/</li>
                            <li>Item/</li>
                        </ul>
                    </li>
                    <li><span class="caret">images/*</span>
                        <ul class="nested">
                            <li>Item</li>
                            <li>Item</li>
                        </ul>
                    </li>
                    <li><span class="caret">img/</span>
                        <ul class="nested">
                            <li>invalido.png</li>
                            <li>valido.png</li>
                        </ul>
                    </li>
                    <li><span class="caret">js-geo/</span>
                        <ul class="nested">
                            <li><span class="caret">modules</span>
                                <ul class="nested">
                                    <li>inicio.js</li>
                                    <li><b>select.js</b></li>
                                    <li><b>servicioMap.js</b></li>
                                </ul>
                            </li>
                            <li><span class="caret">plugins/*</span>
                        </ul>
                    </li>
                    <li><span class="caret">mapa/*</span>
                        <ul class="nested">
                            <li>Item</li>
                            <li>Item</li>
                        </ul>
                    </li>
                    <li><span class="caret">modules/*</span>
                        <ul class="nested">
                            <li>Item</li>
                            <li>Item</li>
                        </ul>
                    </li>
                    <li><span class="caret">php-getting-started/*</span>
                        <ul class="nested">
                            <li>Item</li>
                            <li>Item</li>
                        </ul>
                    </li>
                    <li><span class="caret">access-config.php</span></li>
                    <li><span class="caret">block.php</span></li>
                    <li><span class="caret">composer.json</span></li>
                    <li><span class="caret">Database.php</span></li>
                    <li><span class="caret"><b>footer.php</b></span></li>
                    <li><span class="caret"><b>header.php</b></span></li>
                    <li><span class="caret">index.php</span></li>
                    <li><span class="caret">info.php</span></li>
                    <li><span class="caret">LICENSE</span></li>
                    <li><span class="caret"><b>README.md</b></span></li>
                    <li><span class="caret"><b>select.php</b></span></li>
                    <li><span class="caret"><b>servicio-map.php</b></span></li>
                </ul>

                <div>
                    <p>El SICLR cuenta con dos opciones o formas de acceso a la información y descarga de datos: opción
                        1, de búsqueda por localidad, y opción 2, de búsqueda por territorio o tipo de tenencia de la
                        tierra.
                    </p>
                    <p>
                        En ambas opciones, el usuario accede a la información a través de un formulario en donde, en los
                        primeros dos elementos, el usuario debe escoger el estado y municipio de interés. Después de
                        eso, la aplicación muestra distintos modos de acceso a la información.
                    </p>
                </div>
            </section>

            <hr>
            <div>
                <section id="#opcion-1">
                    <div>
                        <h2>1. Búsqueda por localidades</h2>

                        <p>El siguiente diagrama muestra los archivos relacionados para la opción 1 del SICLR.</p>

                        <img id="imagenes" src="./imgs/diagrama-opcion-1.png" alt="Diagrama opción 1 del servicio"
                            style="width:500px;height:300px;">
                        <figcaption>Fig.1 - Esquema de la interacción de los scripts para la opción 1.</figcaption>

                        <p>
                            El archivo <tt>select.php</tt> es el que se encarga de la vista de la opción 1 (Fig 2). En
                            la
                            vista se pueden ver los elementos del formualario como son: Estado, Municipio, Localidad,
                            Tema,
                            Año de consulta, Subtema e Indicadores. Una vez que el usuario realizó la selección de
                            interés,
                            dará click al botón <i>Ver indicadores</i> y posteriormente podrá dar click al botón
                            <i>Exportar</i>.
                        </p>

                        <img src="./imgs/vista_general_opcion_1.png" alt="Vista general de la opción 1"
                            style="width:500px;height:300px;">
                        <figcaption>Fig.2 - Vista general de la opción 1, creada por el archivo select.php.</figcaption>

                        <hr width="50%" size="50">
                    </div>
                    <div>
                        <h3>1.1 Inicialización de la aplicación</h3>

                        <p>
                            Cuando la aplicación inicializa se ejecuta la función <tt>init</tt>. Esta función se
                            encuentra en el archivo <tt>footer.php</tt> y en la función
                            <tt>js-geo/modules/select.js</tt>
                        </p>
                        <p>
                            La función <tt>init</tt>, en el archivo <tt>foooter.php</tt>, usa la función
                            <tt>bindTheme</tt>, que tiene interaccin con:

                        <ul>
                            <li>
                                <tt>btnThemes</tt>. Esta función se encarga de ponerle estilo a los botones cuando el
                                usuario da click a cada uno de ellos.
                            </li>
                            <li>
                                <tt>btnSalir</tt>. Esta función fue creada en el caso futuro de que exista una página de
                                inicio donde el usuario pueda iniciar sesión (<i>log in</i>) en el servicio.
                            </li>
                            <li><tt>themeSelect</tt>. <b>Esta aún no sé qué hace.</b></li>
                        </ul>


                        </p>
                        <p>
                            La función <tt>init</tt> dentro del archivo <tt>js-geo/modules/select.js</tt> usa las
                            funciones <tt>initAlterData()</tt> y <tt>bindFilters()</tt>.
                        </p>
                        <p>
                            La función <tt>initAlterData()</tt> se usa para inicializar todas las variables que se usan
                            en cada uno de los elementos del formulario y realiza la llamada a la BD con la función
                            <tt>apiCall</tt>.
                        </p>
                        <p>
                            La función <tt>bindFilters()</tt> se usa para ir filtrando los valores de interés, a medida
                            que el
                            usuario está interactuando con el formulario. Esta función utiliza a su vez las funciones
                            de: <tt>changeEstado()</tt>, <tt>changeAnio()</tt>, <tt>changeTema()</tt>,
                            <tt>changeSubtema()</tt>, <tt>checkAllIndicadores()</tt> y <tt>checkAllIndicadoresVar()</tt>
                            para estar realizando los cambios de valores (desde la base de datos) cuando el usuario
                            realiza una selección o realiza un cambio de selección; también utiliza la función
                            <tt>buscarRes()</tt>, que se encarga de realizar la búsqueda de los valores de interés
                            cuando el usuario da click al botón <i>Ver indicadores</i>.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.2 Casilla <b>Estado</b></h3>

                        <p>
                            Cuando el usuario interactúa con la casilla de <b>Estado</b>, la función encargada de esta
                            interacción es <tt>changeEstado</tt>. Esta función recibe, desde la base de datos, el ID del
                            estado que se está seleccionando para hacer el cambio. Cuando la aplicación se inicializa en
                            primera instancia o cuando está seleccionado <i>Selecciona una opción</i>, la casilla de
                            Municipio está deshabilitada.
                        </p>
                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.3 Casilla de <b>Municipio</b></h3>

                        <p>
                            Cuando el usuario interactúa con la casilla de <b>Municipio</b>, la función encargada de
                            esta
                            interacción es <tt>selectMunicipio</tt>. Esta función es utilizada dentro de la función
                            <tt>changeEstado</tt> y recibe como argumento de entrada el ID del estado seleccionado. De
                            esta forma realiza el filtrado de los municipios del estado para mostrar en la lista
                            desplegable.
                        </p>
                        <p>
                            Cuando la aplicación se inicializa en primera instancia o cuando está
                            seleccionado <i>Selecciona una opción</i>, la casilla de Municipio está deshabilitada.

                        </p>
                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.4 Casilla de <b>Localidad</b></h3>

                        <p>
                            Cuando el usuario interactúa con la casilla de <b>Localidad</b>, la función encargada de
                            esta interacción es <tt>selectLocalidad</tt>. Esta función es utilizada dentro de la función
                            <tt>selectMunicipio</tt>. Recibe como argumento de entrada el ID del municipio seleccionado
                            por el usuario. De esta forma, realiza el filtrado de todas las localidades que pertenecen
                            al municipio de interés. En este momento, esta función selecciona por defecto todas las
                            localidades filtradas.
                        </p>
                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.5 Casilla de <b>Tema</b></h3>

                        <p>
                            Cuando la aplicación inicializa, la función que trabaja es <tt>selectTema</tt>. Esta función
                            crea una lista de todos los temas de la BD y los muestra en la casilla en forma de lista
                            desplegable. La función <tt>selectTema</tt> interactúa dentro de la función
                            <tt>initAlterData</tt> en donde se muestra por defecto el factor dos.
                        </p>
                        <p>
                            Cuando el usuario interactúa con la casilla y realiza un cambio de tema, la función que
                            realiza esta interacción es <tt>changeTema</tt>. Esta función captura la selección del
                            usuario. Si la selección es uno de los 8 factores, la casilla de subtema muestra el subtema
                            relacionado al tema seleccionado; si la selección del subtema es <b>Desarrollo Local</b>, la
                            casilla de <b>Subtema</b> se activa para mostrar las 12 opciones de este tema.
                        </p>
                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.6 Casilla de <b>Año</b></h3>

                        <p>
                            Cuando la aplicación inicializa, la función que trabaja es <tt>changeAnio</tt>. Esta función
                            utiliza inmediatamente la función <tt>selectSubtema</tt>, que muestra por defecto el factor
                            2 y el subtema asociado a este factor.
                        </p>

                        <p>
                            Una vez que el año es seleccionado, la variable guardada (<tt>#anio</tt>) es utilizada
                            dentro de las funciones:

                        <ul>
                            <li><tt>apiDataAllFilter</tt>: esta función realiza el filtrado de todas las variables
                                seleccionadas en la consulta.</li>
                            <li><tt>callMapPrint</tt>: esta función realiza la creación del mapa cartográfico.</li>
                            <li><tt>generateExcel</tt>: esta función crea la tabla de datos y la exporta.</li>
                            <li><tt>generatePdf</tt>: esta función genera el pdf, descriptor de datos, y lo exporta.
                            </li>
                        </ul>
                        </p>
                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.7 Casilla de Subtema</h3>

                        <p>
                            Esta función se utiliza dentro de la función <tt>changeTema</tt> y dentro de la función
                            <tt>changeAnio</tt>.
                        </p>

                        <p>
                            Si el tema <b>Desarrollo Local</b> ha sido seleccionado en la casilla <b>Tema</b>, la
                            función usa la clase <tt>.descsubtema</tt>, la cual muestra la lista de subtemas asociados a
                            <b>Desarrollo Local</b>.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.8 Tema Desarrollo Local</h3>

                        <p>
                            A diferencia del resto de los temas, el tema de <b>Desarrollo Local</b> tiene 12 subtemas.
                            Ya que, en este caso, el usuario tiene la posibilidad de seleccionar un subtema, cuando el
                            usuario escoge el tema de <b>Desarrollo Local</b>, se activa la casilla de <tt>Subtema</tt>,
                            con una lista desplegable, para que el usuario pueda interactuar con ella y seleccione el
                            subtema.
                        <p>
                            La función <tt>selectTema</tt> se encarga de lo anterior. Cuando el usuario escoge un tema
                            distinto a <b>Desarrollo local</b>, la casilla de <tt>Año</tt> sigue activa en el
                            formulario; cuando el usuario escoge el tema de <b>Desarrollo local</b>, la casilla de
                            <tt>Año</tt> se desactiva y la casilla de <tt>Subtema</tt> se activa para mostrar los 12
                            subtemas.
                        </p>
                        </p>
                        <p>
                            Dentro de los subtemas en <b>Desarrollo local</b> se encuentra <b>Problema Principal,
                                2020</b>. Cuando el usuario selecciona este subtema, se muestra una tabla con los
                            posibles problemas principales declarados por el informante de la localidad. Esta
                            interacción ocurre en la función <tt>buscarRes</tt>; en este archivo existe una condicional
                            (<tt>if (choice_tab == "desarrollo_local")</tt>, que hace que se muestre la tabla.
                        </p>
                    </div>
                    
                    <div>
                        <h3>1.9 Botón Ver Indicadores</h3>

                        <p>
                            Cuando el usuario interactúa con el botón <b>Ver indicadores</b>, la función encargada de
                            esta interacción es <tt>getInitResponse</tt>. Esta función utiliza la función
                            <tt>apiDataAllFilter</tt> para filtrar todas las variables seleccionadas en la consulta.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>1.10 Botón Exportar</h3>

                        <p>
                            El botón Exportar genera tres productos que se descargan en la computadora del usuario. Utiliza la función <tt>callMapPrint</tt>, que a su vez, usa las funciones <tt>generateExcel</tt>, <tt>genetarePDF</tt>. Estas dos funciones hacen una consulta a la BD en el archivo <tt>ApiMapa.php</tt> en el directorio <tt>ApiControl</tt>. Este archivo realiza la consulta a la BD usando los elementos que el usuario seleccionó en el formulario. 
                        </p>

                        <p>
                            
                        </p>
                    </div>

                </section>
            </div>

            <hr>
            <div>
                <section id="#opcion-2">
                    <div>
                        <h2>2. Búsqueda por Territorio o Tenencia de la tierra</h2>

                        <p>El siguiente diagrama muestra los archivos relacionados para la opción 2 del SICLR</p>

                        <img src="./imgs/diagrama-opcion-2.png" alt="Diagrama opción 2 del servicio"
                            style="width:500px;height:300px;">

                        <p>
                            El archivo <tt>servicio-map.php</tt> es el que se encarga de la vista de esta búsqueda (Fig.
                            1). En la figura 2 se puede ver de manera general los elementos de esta opción:
                            <tt>Estado</tt>, <tt>Municipio</tt> y <tt>Territorio o Tenencia de la tierra</tt>.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>2.1. Inicialización de la aplicación</h3>

                        <p>
                            Cuando la aplicación inicializa, se ejecuta la función <tt>init</tt>. Esta función se
                            encuentra en el archivo <tt>footer.php</tt> y en la función <tt>servicioMap.js</tt>.
                        </p>
                        <p>
                            La función <tt>init</tt>, en el archivo <tt>foooter.php</tt>, usa la función
                            <tt>bindTheme</tt>, que tiene interaccin con:

                        <ul>
                            <li>
                                <tt>btnThemes</tt>. Esta función se encarga de ponerle estilo a los botones cuando el
                                usuario da click a cada uno de ellos.
                            </li>
                            <li>
                                <tt>btnSalir</tt>. Esta función fue creada en el caso futuro de que exista una página de
                                inicio donde el usuario pueda iniciar sesión (<i>log in</i>) en el servicio.
                            </li>
                            <li><tt>themeSelect</tt>. <b></b></li>
                        </ul>
                        </p>
                        <p>
                            La función <tt>init</tt> dentro del archivo <tt>js-geo/modules/select.js</tt> usa las
                            funciones <tt>initAlterData()</tt> y <tt>bindFilters()</tt>.
                        </p>
                        <p>
                            La función <tt>initAlterData()</tt> se usa para inicializar todas las variables que se usan
                            en cada uno de los elementos del formulario y realiza la llamada a la BD con la función
                            <tt>apiCall</tt>. Esta función también utiliza la función <tt>selectEstado</tt>, para
                            mostrar los tres estados en la lista, y la función <tt>selectTema</tt>, con la selección por
                            defecto del tema 2.
                        </p>
                        <p>
                            La función <tt>bindFilters()</tt> se usa para ir filtrando los valores de interés, a medida
                            que el
                            usuario está interactuando con el formulario. Esta función utiliza a su vez las funciones
                            de: <tt>changeEstado()</tt>, <tt>changeAnio()</tt>, <tt>changeTema()</tt>,
                            <tt>changeSubtema()</tt>, <tt>checkAllIndicadores()</tt> y <tt>checkAllIndicadoresVar()</tt>
                            para estar realizando los cambios de valores (desde la base de datos) cuando el usuario
                            realiza una selección o realiza un cambio de selección; también utiliza la función
                            <tt>buscarRes()</tt>, que se encarga de realizar la búsqueda de los valores de interés
                            cuando el usuario da click al botón <i>Ver indicadores</i>.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>2.2 Casilla Estado</h3>

                        <p>
                            Cuando el usuario interactúa con la casilla de <b>Estado</b>, la función encargada de esta
                            interacción es <tt>changeEstado</tt>. Esta función recibe, desde la base de datos, el ID del
                            estado que se está seleccionando para hacer el cambio. Cuando la aplicación se inicializa en
                            primera instancia o cuando está seleccionado <i>Selecciona una opción</i>, la casilla de
                            Municipio está deshabilitada.
                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>2.3 Casilla Municipio</h3>

                        <p>
                            Cuando el usuario interactúa con la casilla de <b>Municipio</b>, la función encargada de
                            esta
                            interacción es <tt>selectMunicipio</tt>. Esta función es utilizada dentro de la función
                            <tt>changeEstado</tt> y recibe como argumento de entrada el ID del estado seleccionado. De
                            esta forma realiza el filtrado de los municipios del estado para mostrar en la lista
                            desplegable.
                        </p>
                        <p>
                            Cuando la aplicación se inicializa en primera instancia o cuando está
                            seleccionado <i>Selecciona una opción</i>, la casilla de Municipio está deshabilitada.

                        </p>

                        <hr width="50%" size="50">
                    </div>

                    <div>
                        <h3>2.4 Casilla Territorio o tenencia</h3>

                        <p>

                        </p>

                        <hr width="50%" size="50">

                    <div>
                        <h3>2.5 Botón Exportar</h3>

                        <p>
                            El botón Exportar genera cuatro productos que se descargan en la computadora del usuario. Utiliza la función <tt>callMapPrint</tt>, que a su vez, usa las funciones <tt>generateExcel</tt>, <tt>genetarePDF</tt>. Estas dos funciones hacen una consulta a la BD en el archivo <tt>ApiMapa.php</tt> en el directorio <tt>ApiControl</tt>. Este archivo realiza la consulta a la BD usando los elementos que el usuario seleccionó en el formulario. 
                        </p>

                        <p>
                            
                        </p>
                    </div>
                    </div>
                </section>
            </div>

        </main>
        <hr>
        <footer>
            <p>Copyright @2022 | Designed by CentroGeo</p>
        </footer>
    </div>
</body>

</html>